# –†–µ–∑—é–º–µ: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è MCP —Å —ç–≤—Ä–∏—Å—Ç–∏–∫–∞–º–∏ (–±–µ–∑ LLM)

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ú–æ–¥—É–ª—å `mcp_heuristics.py`

–°–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç–≤—Ä–∏—Å—Ç–∏–∫–∞–º–∏:

- `retrieve_with_mcp_heuristics()` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º–∏ —ç–≤—Ä–∏—Å—Ç–∏–∫–∞–º–∏
- `retrieve_with_mcp_simple()` - —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —Ñ–∞–π–ª–æ–≤
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–¥–∞—á
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ relevance_score
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `mcp_retrieval.py`

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏ –ø—Ä–∏ `use_llm=False`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è `mcp_heuristics`
- –°–æ—Ö—Ä–∞–Ω–µ–Ω –±–∞–∑–æ–≤—ã–π fallback –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `retrieval.py`

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LLM –∏–ª–∏ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏
- –ï—Å–ª–∏ `mcp_provider` –Ω–µ —É–∫–∞–∑–∞–Ω –∏–ª–∏ —Ä–∞–≤–µ–Ω "heuristics" ‚Üí —ç–≤—Ä–∏—Å—Ç–∏–∫–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã

### 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã MCP –≤ `RetrievalConfig`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ `config.yaml`
- –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ evaluator

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±:

```yaml
# config.yaml
retrieval:
  enabled: true
  use_mcp: true  # –í—Å—ë! –≠–≤—Ä–∏—Å—Ç–∏–∫–∏ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### –ó–∞–ø—É—Å–∫:

```bash
python -m locobench.cli evaluate \
    --scenarios data/output/scenarios/test_easy_scenario.json \
    --config config.yaml
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã —ç–≤—Ä–∏—Å—Ç–∏–∫:

1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤** –∏–∑ –∑–∞–¥–∞—á–∏
2. **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∑–∞–¥–∞—á–∏:
   - Security: –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è "security auth validate sanitize"
   - Architectural: –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è "architecture design pattern component"
   - Comprehension: –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è "trace flow execution call"
3. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö tools** —Å —ç—Ç–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
4. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ relevance_score**
5. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** –ø–æ –ø—É—Ç–∏ —Ñ–∞–π–ª–∞
6. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

‚úÖ **–ù–µ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ LLM –±–∏–±–ª–∏–æ—Ç–µ–∫
‚úÖ **–ë—ã—Å—Ç—Ä–æ** - –Ω–µ—Ç —Å–µ—Ç–µ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ** - –Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
‚úÖ **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ** - —Ä–∞–∑–Ω—ã–µ tools –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback** - –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π retrieval

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–≠–≤—Ä–∏—Å—Ç–∏–∫–∏ –¥–æ–ª–∂–Ω—ã —É–ª—É—á—à–∏—Ç—å:
- **–¢–æ—á–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤** - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ tools
- **–ü–æ–∫—Ä—ã—Ç–∏–µ** - –Ω–µ—Å–∫–æ–ª—å–∫–æ tools –Ω–∞—Ö–æ–¥—è—Ç —Ä–∞–∑–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã
- **–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å** - —Ñ–∞–π–ª—ã –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∏–ø–∞ –∑–∞–¥–∞—á–∏

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
2. ‚è≠Ô∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `config.yaml` —Å `use_mcp: true`
3. ‚è≠Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –æ—Ü–µ–Ω–∫—É
4. ‚è≠Ô∏è –°—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
5. ‚è≠Ô∏è –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–∏—Ç—å LLM –¥–ª—è –µ—â–µ –ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üìù –§–∞–π–ª—ã

- `locobench/mcp_heuristics.py` - –º–æ–¥—É–ª—å —Å —ç–≤—Ä–∏—Å—Ç–∏–∫–∞–º–∏
- `locobench/mcp_retrieval.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è fallback
- `locobench/retrieval.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π retrieval
- `locobench/core/config.py` - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `locobench/evaluation/evaluator.py` - –ø–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

MCP —Å —ç–≤—Ä–∏—Å—Ç–∏–∫–∞–º–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –ü—Ä–æ—Å—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `use_mcp: true` –≤ config.yaml!
